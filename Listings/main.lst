A51 MACRO ASSEMBLER  MAIN                                                                 09/25/2023 19:46:39 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\main.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE main.a51 SET(SMALL) DEBUG PRINT(.\Listings\main.lst) OBJECT(.\Objects\m
                      ain.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ; F(x3, x2, x1, x0) = 2, 3, 4, 9, 11, 12, 13
                       2     ; R0 - address of the reference function
                       3     ; R1 - shift counter
                       4     
                       5     ; Start
0000                   6         ORG     0000h           ; Starting address
  00C0                 7         P4      EQU 0C0h        ; Define P4
                       8     
                       9     ; Preparing the environment for work
0000 908000           10         MOV     DPTR, #8000h    ; \;
0003 7408             11         MOV     A, #08h         ; | Loading an indirect address into external memory
0005 F0               12         MOVX    @DPTR, A        ; /
                      13     
0006 908008           14         MOV     DPTR, #8008h    ; \;
0009 7415             15         MOV     A, #15h         ; | Loading the base address into external memory
000B F0               16         MOVX    @DPTR, A        ; /
                      17     
000C 908000           18         MOV     DPTR, #8000h    ; \;
000F E0               19         MOVX    A, @DPTR        ; | Calculating the address of the reference
0010 F582             20         MOV     DPL, A          ; | function in external memory and writing
0012 E0               21         MOVX    A, @DPTR        ; | this address to the register R0
0013 F582             22         MOV     DPL, A          ; |
0015 A882             23         MOV     R0, DPL         ; /
                      24     
0017 741C             25         MOV     A, #01Ch        ; \;
0019 F0               26         MOVX    @DPTR, A        ; | Writing a reference function
001A A3               27         INC     DPTR            ; | to external memory
001B 743A             28         MOV     A, #03Ah        ; |
001D F0               29         MOVX    @DPTR, A        ; /
                      30     
001E 908020           31         MOV     DPTR, #8020h
0021 7402             32         MOV     A, #2
0023 F0               33         MOVX    @DPTR, A
                      34     
0024 908021           35         MOV     DPTR, #8021h
0027 7401             36         MOV     A, #1
0029 F0               37         MOVX    @DPTR, A
                      38     
002A 908022           39         MOV     DPTR, #8022h
002D 7404             40         MOV     A, #4
002F F0               41         MOVX    @DPTR, A
                      42     
0030 908023           43         MOV     DPTR, #8023h
0033 7401             44         MOV     A, #1
0035 F0               45         MOVX    @DPTR, A
                      46     
0036 908024           47         MOV     DPTR, #8024h
0039 7403             48         MOV     A, #3
003B F0               49         MOVX    @DPTR, A
                      50     
003C 908025           51         MOV     DPTR, #8025h
003F 7401             52         MOV     A, #1
0041 F0               53         MOVX    @DPTR, A
                      54     
0042 908026           55         MOV     DPTR, #8026h
0045 7401             56         MOV     A, #1
0047 F0               57         MOVX    @DPTR, A
A51 MACRO ASSEMBLER  MAIN                                                                 09/25/2023 19:46:39 PAGE     2

                      58     
0048 908027           59         MOV     DPTR, #8027h
004B 7401             60         MOV     A, #1
004D F0               61         MOVX    @DPTR, A
                      62     
004E 908028           63         MOV     DPTR, #8028h
0051 7401             64         MOV     A, #1
0053 F0               65         MOVX    @DPTR, A
                      66     
0054 908029           67         MOV     DPTR, #8029h
0057 7403             68         MOV     A, #3
0059 F0               69         MOVX    @DPTR, A
                      70     
005A 90802A           71         MOV     DPTR, #802Ah
005D 7401             72         MOV     A, #1
005F F0               73         MOVX    @DPTR, A
                      74     
0060 90802B           75         MOV     DPTR, #802Bh
0063 7404             76         MOV     A, #4
0065 F0               77         MOVX    @DPTR, A
                      78     
0066 90802C           79         MOV     DPTR, #802Ch
0069 7405             80         MOV     A, #5
006B F0               81         MOVX    @DPTR, A
                      82     
006C 90802D           83         MOV     DPTR, #802Dh
006F 7402             84         MOV     A, #2
0071 F0               85         MOVX    @DPTR, A
                      86     
0072 90802E           87         MOV     DPTR, #802Eh
0075 7401             88         MOV     A, #1
0077 F0               89         MOVX    @DPTR, A
                      90     
0078 90802F           91         MOV     DPTR, #802Fh
007B 7401             92         MOV     A, #1
007D F0               93         MOVX    @DPTR, A
                      94     
                      95     ; Preparing input values
007E                  96     PREPARING:
007E 907FFB           97         MOV     DPTR, #7FFBh    ; \;
0081 E0               98         MOVX    A, @DPTR        ; | Cyclic polling of the readiness bit
0082 60FA             99         JZ      PREPARING       ; /
0084 907FFA          100         MOV     DPTR, #7FFAh    ; \;
0087 E0              101         MOVX    A, @DPTR        ; | Writing the input value to the internal memory
0088 F520            102         MOV     20h, A          ; /
                     103     
                     104     ; Calculation of a logical function
008A A201            105         MOV     C, 1            ;
008C B002            106         ANL     C, /2           ;
008E B003            107         ANL     C, /3           ;
0090 9208            108         MOV     8, C            ;
0092 A202            109         MOV     C, 2            ;
0094 B000            110         ANL     C, /0           ;
0096 B001            111         ANL     C, /1           ;
0098 9209            112         MOV     9, C            ;
009A A202            113         MOV     C, 2            ;
009C B001            114         ANL     C, /1           ;
009E 8203            115         ANL     C, 3            ;
00A0 920A            116         MOV     10, C           ;
00A2 A200            117         MOV     C, 0            ;
00A4 B002            118         ANL     C, /2           ;
00A6 8203            119         ANL     C, 3            ;
00A8 7208            120         ORL     C, 8            ;
00AA 7209            121         ORL     C, 9            ;
00AC 720A            122         ORL     C, 10           ;
00AE 9208            123         MOV     8, C            ;
A51 MACRO ASSEMBLER  MAIN                                                                 09/25/2023 19:46:39 PAGE     3

                     124     
                     125     ; Comparison of the obtained result with the reference function
00B0 908000          126         MOV     DPTR, #8000h    ; \;Preparing the address of
00B3 8882            127         MOV     DPL, R0         ; / the reference function
00B5 200302          128         JB      3, PTR_1        ; \;Checking which half
00B8 01BD            129         AJMP    PTR_2           ; / of the reference function to use
00BA                 130     PTR_1:
00BA A3              131         INC     DPTR            ; \;Preparation for working with the
00BB C203            132         CLR     3               ; / second half of the reference function
00BD                 133     PTR_2:
00BD E0              134         MOVX    A, @DPTR        ; Writing part of the reference function to the accumulator
00BE A920            135         MOV     R1, 20h         ; Preparing the shift counter
00C0                 136     SHIFT:
00C0 B90002          137         CJNE    R1, #00h, PTR_3 ; \;
00C3 01C9            138         AJMP    PTR_4           ; |
00C5                 139     PTR_3:                      ; | Shift the desired bit to
00C5 03              140         RR      A               ; | the first (index=0) position
00C6 19              141         DEC     R1              ; |
00C7 01C0            142         AJMP    SHIFT           ; /
00C9                 143     PTR_4:
00C9 A208            144         MOV     C, 8            ; \;
00CB 92C0            145         MOV     P4.0, C         ; | Output of the received result
00CD A2E0            146         MOV     C, ACC.0        ; | and the reference to the P4 channel
00CF B3              147         CPL     C               ; |
00D0 92C1            148         MOV     P4.1, C         ; /
00D2 907FFB          149         MOV     DPTR, #7FFBh    ; \;
00D5 7400            150         MOV     A, #00h         ; | Resetting the ready bit to 0
00D7 F0              151         MOVX    @DPTR, A        ; /
00D8 907FFA          152         MOV     DPTR, #7FFAh    ; \;
00DB E0              153         MOVX    A, @DPTR        ; | The following set
00DC 04              154         INC     A               ; | of input data
00DD F0              155         MOVX    @DPTR, A        ; /
00DE 908000          156             MOV     DPTR, #8000h
00E1 14              157         DEC     A
00E2 540F            158         ANL     A, #00001111b
00E4 2420            159         ADD     A, #20h
00E6 F582            160         MOV     DPL, A
00E8 E0              161         MOVX    A, @DPTR
00E9 F5F0            162         MOV     B, A
00EB 740F            163         MOV     A, #15d
00ED A4              164         MUL     AB
00EE FA              165             MOV     R2, A
00EF 758903          166         MOV     TMOD, #00000011b
00F2                 167     PTR_5:
00F2 79FF            168         MOV     R1, #0FFh
00F4                 169     PTR_6:
00F4 C28C            170         CLR     TR0;
00F6 758A17          171         MOV     TL0, #17h;
00F9 D28C            172         SETB    TR0;
00FB                 173     PTR_7:
00FB 108D02          174         JBC     TF0, PTR_8
00FE 01FB            175             AJMP    PTR_7
0100                 176     PTR_8:
0100 D9F2            177         DJNZ    R1, PTR_6
0102 DAEE            178         DJNZ    R2, PTR_5
0104 017E            179         AJMP    PREPARING
                     180     
                     181     END
A51 MACRO ASSEMBLER  MAIN                                                                 09/25/2023 19:46:39 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
DPL. . . . . . . .  D ADDR   0082H   A   
P4 . . . . . . . .  N NUMB   00C0H   A   
PREPARING. . . . .  C ADDR   007EH   A   
PTR_1. . . . . . .  C ADDR   00BAH   A   
PTR_2. . . . . . .  C ADDR   00BDH   A   
PTR_3. . . . . . .  C ADDR   00C5H   A   
PTR_4. . . . . . .  C ADDR   00C9H   A   
PTR_5. . . . . . .  C ADDR   00F2H   A   
PTR_6. . . . . . .  C ADDR   00F4H   A   
PTR_7. . . . . . .  C ADDR   00FBH   A   
PTR_8. . . . . . .  C ADDR   0100H   A   
SHIFT. . . . . . .  C ADDR   00C0H   A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TL0. . . . . . . .  D ADDR   008AH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
